{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ttlMilliseconds = exports.errorExists = exports.backoff = exports.log = exports.isFunction = exports.startsWith = void 0;\n/** @internal */\nfunction startsWith(value, prefix) {\n  return value.lastIndexOf(prefix, 0) === 0;\n}\nexports.startsWith = startsWith;\n/** @internal */\nfunction isFunction(value) {\n  if (value === undefined || value === null) {\n    return false;\n  }\n  return typeof value === 'function';\n}\nexports.isFunction = isFunction;\n/** @internal */\nfunction log(level, args) {\n  if (globalThis.console) {\n    const logger = globalThis.console[level];\n    if (isFunction(logger)) {\n      logger.apply(globalThis.console, args);\n    }\n  }\n}\nexports.log = log;\nfunction randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n/** @internal */\nfunction backoff(step, min, max) {\n  // Full jitter technique, see:\n  // https://aws.amazon.com/blogs/architecture/exponential-backoff-and-jitter/\n  if (step > 31) {\n    step = 31;\n  }\n  const interval = randomInt(0, Math.min(max, min * Math.pow(2, step)));\n  return Math.min(max, min + interval);\n}\nexports.backoff = backoff;\n/** @internal */\nfunction errorExists(data) {\n  return 'error' in data && data.error !== null;\n}\nexports.errorExists = errorExists;\n/** @internal */\nfunction ttlMilliseconds(ttl) {\n  // https://stackoverflow.com/questions/12633405/what-is-the-maximum-delay-for-setinterval\n  return Math.min(ttl * 1000, 2147483647);\n}\nexports.ttlMilliseconds = ttlMilliseconds;","map":{"version":3,"mappings":";;;;;;AAAA;AACA,SAAgBA,UAAU,CAACC,KAAK,EAAEC,MAAM;EACtC,OAAOD,KAAK,CAACE,WAAW,CAACD,MAAM,EAAE,CAAC,CAAC,KAAK,CAAC;AAC3C;AAFAE;AAIA;AACA,SAAgBC,UAAU,CAACJ,KAAK;EAC9B,IAAIA,KAAK,KAAKK,SAAS,IAAIL,KAAK,KAAK,IAAI,EAAE;IACzC,OAAO,KAAK;;EAEd,OAAO,OAAOA,KAAK,KAAK,UAAU;AACpC;AALAG;AAOA;AACA,SAAgBG,GAAG,CAACC,KAAK,EAAEC,IAAI;EAC7B,IAAIC,UAAU,CAACC,OAAO,EAAE;IACtB,MAAMC,MAAM,GAAGF,UAAU,CAACC,OAAO,CAACH,KAAK,CAAC;IAExC,IAAIH,UAAU,CAACO,MAAM,CAAC,EAAE;MACtBA,MAAM,CAACC,KAAK,CAACH,UAAU,CAACC,OAAO,EAAEF,IAAI,CAAC;;;AAG5C;AARAL;AAUA,SAASU,SAAS,CAACC,GAAW,EAAEC,GAAW;EACzC,OAAOC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,IAAIH,GAAG,GAAGD,GAAG,GAAG,CAAC,CAAC,GAAGA,GAAG,CAAC;AAC1D;AAEA;AACA,SAAgBK,OAAO,CAACC,IAAY,EAAEN,GAAW,EAAEC,GAAW;EAC5D;EACA;EACA,IAAIK,IAAI,GAAG,EAAE,EAAE;IAAEA,IAAI,GAAG,EAAE;;EAC1B,MAAMC,QAAQ,GAAGR,SAAS,CAAC,CAAC,EAAEG,IAAI,CAACF,GAAG,CAACC,GAAG,EAAED,GAAG,GAAGE,IAAI,CAACM,GAAG,CAAC,CAAC,EAAEF,IAAI,CAAC,CAAC,CAAC;EACrE,OAAOJ,IAAI,CAACF,GAAG,CAACC,GAAG,EAAED,GAAG,GAAGO,QAAQ,CAAC;AACtC;AANAlB;AAQA;AACA,SAAgBoB,WAAW,CAACC,IAAS;EACnC,OAAO,OAAO,IAAIA,IAAI,IAAIA,IAAI,CAACC,KAAK,KAAK,IAAI;AAC/C;AAFAtB;AAIA;AACA,SAAgBuB,eAAe,CAACC,GAAW;EACzC;EACA,OAAOX,IAAI,CAACF,GAAG,CAACa,GAAG,GAAG,IAAI,EAAE,UAAU,CAAC;AACzC;AAHAxB","names":["startsWith","value","prefix","lastIndexOf","exports","isFunction","undefined","log","level","args","globalThis","console","logger","apply","randomInt","min","max","Math","floor","random","backoff","step","interval","pow","errorExists","data","error","ttlMilliseconds","ttl"],"sources":["../src/utils.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}