{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WebsocketTransport = void 0;\n/** @internal */\nclass WebsocketTransport {\n  constructor(endpoint, options) {\n    this.endpoint = endpoint;\n    this.options = options;\n    this._transport = null;\n  }\n  name() {\n    return 'websocket';\n  }\n  subName() {\n    return 'websocket';\n  }\n  emulation() {\n    return false;\n  }\n  supported() {\n    return this.options.websocket !== undefined && this.options.websocket !== null;\n  }\n  initialize(protocol, callbacks) {\n    let subProtocol = '';\n    if (protocol === 'protobuf') {\n      subProtocol = 'centrifuge-protobuf';\n    }\n    if (subProtocol !== '') {\n      this._transport = new this.options.websocket(this.endpoint, subProtocol);\n    } else {\n      this._transport = new this.options.websocket(this.endpoint);\n    }\n    if (protocol === 'protobuf') {\n      this._transport.binaryType = 'arraybuffer';\n    }\n    this._transport.onopen = () => {\n      callbacks.onOpen();\n    };\n    this._transport.onerror = e => {\n      callbacks.onError(e);\n    };\n    this._transport.onclose = closeEvent => {\n      callbacks.onClose(closeEvent);\n    };\n    this._transport.onmessage = event => {\n      callbacks.onMessage(event.data);\n    };\n  }\n  close() {\n    this._transport.close();\n  }\n  send(data) {\n    this._transport.send(data);\n  }\n}\nexports.WebsocketTransport = WebsocketTransport;","map":{"version":3,"mappings":";;;;;;AAAA;AACA,MAAaA,kBAAkB;EAK7BC,YAAYC,QAAgB,EAAEC,OAAY;IACxC,IAAI,CAACD,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,UAAU,GAAG,IAAI;EACxB;EAEAC,IAAI;IACF,OAAO,WAAW;EACpB;EAEAC,OAAO;IACL,OAAO,WAAW;EACpB;EAEAC,SAAS;IACP,OAAO,KAAK;EACd;EAEAC,SAAS;IACP,OAAO,IAAI,CAACL,OAAO,CAACM,SAAS,KAAKC,SAAS,IAAI,IAAI,CAACP,OAAO,CAACM,SAAS,KAAK,IAAI;EAChF;EAEAE,UAAU,CAACC,QAAgB,EAAEC,SAAc;IACzC,IAAIC,WAAW,GAAG,EAAE;IACpB,IAAIF,QAAQ,KAAK,UAAU,EAAE;MAC3BE,WAAW,GAAG,qBAAqB;;IAErC,IAAIA,WAAW,KAAK,EAAE,EAAE;MACtB,IAAI,CAACV,UAAU,GAAG,IAAI,IAAI,CAACD,OAAO,CAACM,SAAS,CAAC,IAAI,CAACP,QAAQ,EAAEY,WAAW,CAAC;KACzE,MAAM;MACL,IAAI,CAACV,UAAU,GAAG,IAAI,IAAI,CAACD,OAAO,CAACM,SAAS,CAAC,IAAI,CAACP,QAAQ,CAAC;;IAE7D,IAAIU,QAAQ,KAAK,UAAU,EAAE;MAC3B,IAAI,CAACR,UAAU,CAACW,UAAU,GAAG,aAAa;;IAG5C,IAAI,CAACX,UAAU,CAACY,MAAM,GAAG,MAAK;MAC5BH,SAAS,CAACI,MAAM,EAAE;IACpB,CAAC;IAED,IAAI,CAACb,UAAU,CAACc,OAAO,GAAGC,CAAC,IAAG;MAC5BN,SAAS,CAACO,OAAO,CAACD,CAAC,CAAC;IACtB,CAAC;IAED,IAAI,CAACf,UAAU,CAACiB,OAAO,GAAGC,UAAU,IAAG;MACrCT,SAAS,CAACU,OAAO,CAACD,UAAU,CAAC;IAC/B,CAAC;IAED,IAAI,CAAClB,UAAU,CAACoB,SAAS,GAAGC,KAAK,IAAG;MAClCZ,SAAS,CAACa,SAAS,CAACD,KAAK,CAACE,IAAI,CAAC;IACjC,CAAC;EACH;EAEAC,KAAK;IACH,IAAI,CAACxB,UAAU,CAACwB,KAAK,EAAE;EACzB;EAEAC,IAAI,CAACF,IAAS;IACZ,IAAI,CAACvB,UAAU,CAACyB,IAAI,CAACF,IAAI,CAAC;EAC5B;;AAhEFG","names":["WebsocketTransport","constructor","endpoint","options","_transport","name","subName","emulation","supported","websocket","undefined","initialize","protocol","callbacks","subProtocol","binaryType","onopen","onOpen","onerror","e","onError","onclose","closeEvent","onClose","onmessage","event","onMessage","data","close","send","exports"],"sources":["../src/transport_websocket.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}