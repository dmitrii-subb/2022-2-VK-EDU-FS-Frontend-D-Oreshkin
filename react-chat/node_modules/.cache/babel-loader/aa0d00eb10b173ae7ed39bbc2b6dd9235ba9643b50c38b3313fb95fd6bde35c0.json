{"ast":null,"code":"var _jsxFileName = \"/home/dmitrii/Dev/vk/front/2022-2-VK-EDU-FS-Frontend-D-Oreshkin/react-chat/src/components/SidebarBody/SidebarBody.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport styles from \"./SidebarBody.module.scss\";\nimport { useNavigate } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { openChatAction } from \"../../actions/activeChatAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SidebarBody(props) {\n  _s();\n  // console.log(props);\n  //     планируется делать запрос на бэк, ответ от которого - это массив со всеми чатами пользователя.\n  //     у чата есть свой id и другая информация, эта информация передается в функцию openChat(), которая открывает этот чат\n\n  const [chats, setChats] = useState([]);\n  const navigate = useNavigate();\n  function getChats(id) {\n    fetch(\"http://localhost:9000/api/v1/users/user/2/get_all_chats\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(resp => resp.json()).then(data => setChats(data));\n  }\n  useEffect(() => {\n    getChats(2);\n  }, []);\n  useEffect(() => {\n    console.log(\"чаты пользователя: (SidebarBody)\", chats);\n  }, [chats]);\n  const chatBlocks = chats.map((chat, index) => {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles.chatPreview,\n      onClick: () => {\n        props.openChatAction(chat);\n        navigate(`/chat/${chat.id}`);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatPicture,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: styles.picture,\n          src: \"https://via.placeholder.com/60\",\n          alt: \"profile_pic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatDetails,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.chatName,\n          children: chat.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.chatLastMessage,\n          children: \"hello, world\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatMeta,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.LastMessageTime,\n          children: \"13:39\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.messageState,\n          children: \"99\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: styles.chatsContainer,\n    children: [chatBlocks, /*#__PURE__*/_jsxDEV(\"section\", {\n      className: styles.chatPreview,\n      onClick: () => {\n        props.openChatAction({\n          id: -1,\n          title: \"Front-end chat\"\n        });\n        navigate(`/chat/-1`);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatPicture,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: styles.picture,\n          src: \"https://via.placeholder.com/60\",\n          alt: \"profile_pic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatDetails,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.chatName,\n          children: \"Frontend chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatMeta\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(SidebarBody, \"KeovYuvwFinf3KgCXES5FqlmYAk=\", false, function () {\n  return [useNavigate];\n});\n_c = SidebarBody;\nconst mapStateToProps = state => ({\n  chat: state.activeChatsReduser\n});\nexport default connect(mapStateToProps, {\n  openChatAction\n})(SidebarBody);\n// export { SidebarBody };\nvar _c;\n$RefreshReg$(_c, \"SidebarBody\");","map":{"version":3,"names":["React","useState","useEffect","styles","useNavigate","connect","openChatAction","SidebarBody","props","chats","setChats","navigate","getChats","id","fetch","method","headers","then","resp","json","data","console","log","chatBlocks","map","chat","index","chatPreview","chatPicture","picture","chatDetails","chatName","title","chatLastMessage","chatMeta","LastMessageTime","messageState","chatsContainer","mapStateToProps","state","activeChatsReduser"],"sources":["/home/dmitrii/Dev/vk/front/2022-2-VK-EDU-FS-Frontend-D-Oreshkin/react-chat/src/components/SidebarBody/SidebarBody.jsx"],"sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport styles from \"./SidebarBody.module.scss\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { connect } from \"react-redux\";\nimport { openChatAction } from \"../../actions/activeChatAction\";\n\nfunction SidebarBody(props) {\n  // console.log(props);\n  //     планируется делать запрос на бэк, ответ от которого - это массив со всеми чатами пользователя.\n  //     у чата есть свой id и другая информация, эта информация передается в функцию openChat(), которая открывает этот чат\n\n  const [chats, setChats] = useState([]);\n  const navigate = useNavigate();\n\n  function getChats(id) {\n    fetch(\"http://localhost:9000/api/v1/users/user/2/get_all_chats\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((resp) => resp.json())\n      .then((data) => setChats(data));\n  }\n\n  useEffect(() => {\n    getChats(2);\n  }, []);\n\n  useEffect(() => {\n    console.log(\"чаты пользователя: (SidebarBody)\", chats);\n  }, [chats]);\n\n  const chatBlocks = chats.map((chat, index) => {\n    return (\n      <section\n        key={index}\n        className={styles.chatPreview}\n        onClick={() => {\n          props.openChatAction(chat);\n          navigate(`/chat/${chat.id}`);\n        }}\n      >\n        <div className={styles.chatPicture}>\n          <img\n            className={styles.picture}\n            src=\"https://via.placeholder.com/60\"\n            alt=\"profile_pic\"\n          />\n        </div>\n\n        <div className={styles.chatDetails}>\n          <span className={styles.chatName}>{chat.title}</span>\n          <span className={styles.chatLastMessage}>hello, world</span>\n        </div>\n        <div className={styles.chatMeta}>\n          <span className={styles.LastMessageTime}>13:39</span>\n          <span className={styles.messageState}>99</span>\n        </div>\n      </section>\n    );\n  });\n\n  return (\n    <article className={styles.chatsContainer}>\n      {chatBlocks}\n\n      <section\n        className={styles.chatPreview}\n        onClick={() => {\n          props.openChatAction({ id: -1, title: \"Front-end chat\" });\n          navigate(`/chat/-1`);\n        }}\n      >\n        <div className={styles.chatPicture}>\n          <img\n            className={styles.picture}\n            src=\"https://via.placeholder.com/60\"\n            alt=\"profile_pic\"\n          />\n        </div>\n        <div className={styles.chatDetails}>\n          <span className={styles.chatName}>Frontend chat</span>\n        </div>\n        <div className={styles.chatMeta}></div>\n      </section>\n    </article>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  chat: state.activeChatsReduser,\n});\n\nexport default connect(mapStateToProps, { openChatAction })(SidebarBody);\n// export { SidebarBody };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}